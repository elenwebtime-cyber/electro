<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>–ó–∞–ø–∏—Å—å –Ω–∞ –≠–ª–µ–∫—Ç—Ä–æ—ç–ø–∏–ª—è—Ü–∏—é</title>
  
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    body { 
      margin: 0; 
      padding: 0; 
      background-color: #0a0a0a; 
      color: white; 
      -webkit-tap-highlight-color: transparent; 
    }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    
    .glass-card-dark { 
      background: rgba(30, 30, 30, 0.4); 
      backdrop-filter: blur(12px); 
      -webkit-backdrop-filter: blur(12px); 
    }
  </style>
</head>
<body class="bg-[#0a0a0a] bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-gray-900 via-[#0a0a0a] to-black font-sans selection:bg-[#C89D7C]/30">
  
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const Icon = ({ name, className }) => {
      const icons = {
        MapPin: <g><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></g>,
        Info: <g><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></g>,
        Clock: <g><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></g>,
        CheckCircle2: <g><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="m9 12 2 2 4-4"/></g>,
        ChevronLeft: <g><path d="m15 18-6-6 6-6"/></g>,
        Heart: <g><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></g>,
        Sparkles: <g><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></g>,
        AlertCircle: <g><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></g>,
        Settings: <g><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z"/></g>
      };
      const style = name === 'Heart' ? { fill: 'currentColor' } : {};
      return (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} style={style}>
          {icons[name]}
        </svg>
      );
    };

    const initialMasterData = {
      name: "–¢–≤–æ–µ –ò–º—è",
      profession: "–ú–∞—Å—Ç–µ—Ä —ç–ª–µ–∫—Ç—Ä–æ—ç–ø–∏–ª—è—Ü–∏–∏",
      photoUrl: "https://images.unsplash.com/photo-1616683693504-3ea7e9ad6fec?q=80&w=200&auto=format&fit=crop",
      address: "–£—é—Ç–Ω–∞—è —Å—Ç—É–¥–∏—è –≤ —Ü–µ–Ω—Ç—Ä–µ (–º. –ö–∏—Ç–∞–π-–≥–æ—Ä–æ–¥)",
      addressNote: "–¢–æ—á–Ω—ã–π –∞–¥—Ä–µ—Å –ø—Ä–∏—à–ª—é –∑–∞ –¥–µ–Ω—å –¥–æ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã ü§´",
      pricePerMinute: 40,
      about: "–£–¥–∞–ª—è—é –≤–æ–ª–æ—Å—ã –Ω–∞–≤—Å–µ–≥–¥–∞. –†–∞–±–æ—Ç–∞—é –±–µ—Ä–µ–∂–Ω–æ, —Å—Ç–µ—Ä–∏–ª—å–Ω–æ –∏ —Å –ª—é–±–æ–≤—å—é –∫ —Ç–≤–æ–µ–º—É —Ç–µ–ª—É. ‚ú®",
      stories: ['–û—Ç–∑—ã–≤—ã', '–î–æ/–ü–æ—Å–ª–µ', '–ü—Ä–∞–π—Å', '–ö–∞–±–∏–Ω–µ—Ç', ''],
      memo: [
        "–î–ª–∏–Ω–∞ –≤–æ–ª–æ—Å–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 3 –¥–æ 5 –º–º.",
        "–ó–∞ —Å—É—Ç–∫–∏ –¥–æ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –Ω–µ –Ω–∞–Ω–æ—Å–∏—Ç—å –∫—Ä–µ–º—ã –∏ –º–∞—Å–ª–∞ –Ω–∞ –∑–æ–Ω—É.",
        "–ü—Ä–∏–º–∏ –¥—É—à –ø–µ—Ä–µ–¥ —Å–µ–∞–Ω—Å–æ–º.",
        "–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –∞–Ω–µ—Å—Ç–µ–∑–∏—é (–∫—Ä–µ–º), –Ω–∞–Ω–µ—Å–∏ –ø–æ–¥ –ø–ª–µ–Ω–∫—É –∑–∞ 1.5 —á–∞—Å–∞ –¥–æ –∑–∞–ø–∏—Å–∏."
      ],
      services: [
        { id: 's1', name: '–õ–∏—Ü–æ (—É—Å–∏–∫–∏, –ø–æ–¥–±–æ—Ä–æ–¥–æ–∫)', defaultTime: 30, icon: '‚ú®' },
        { id: 's2', name: '–ü–æ–¥–º—ã—à–µ—á–Ω—ã–µ –≤–ø–∞–¥–∏–Ω—ã', defaultTime: 60, icon: 'üå∏' },
        { id: 's3', name: '–ë–∏–∫–∏–Ω–∏ –∫–ª–∞—Å—Å–∏–∫–∞', defaultTime: 120, icon: 'üëô' },
        { id: 's4', name: '–ì–æ–ª–µ–Ω–∏', defaultTime: 180, icon: 'ü¶µ' },
      ],
      addons: [
        { id: 'a1', name: '–ò–≥–æ–ª–æ—á–∫–∞-—ç–ª–µ–∫—Ç—Ä–æ–¥', price: 200, icon: 'ü™°' },
        { id: 'a2', name: '–ê–Ω–µ—Å—Ç–µ–∑–∏—è (–∫—Ä–µ–º/–≥–µ–ª—å)', price: 400, icon: 'üßä' }
      ],
      dates: [
        { date: '15 –ú–∞—Ä', day: '–ü—Ç' },
        { date: '16 –ú–∞—Ä', day: '–°–±' },
        { date: '17 –ú–∞—Ä', day: '–í—Å' },
        { date: '18 –ú–∞—Ä', day: '–ü–Ω' },
      ],
      slots: ['10:00', '11:30', '14:00', '16:00', '18:30']
    };

    function App() {
      const [appData, setAppData] = useState(() => {
        const saved = localStorage.getItem('electroAppData');
        return saved ? JSON.parse(saved) : initialMasterData;
      });

      const [activeTab, setActiveTab] = useState('main'); 
      const [selectedServices, setSelectedServices] = useState([]);
      const [selectedDate, setSelectedDate] = useState(null);
      const [selectedTime, setSelectedTime] = useState(null);
      const [showMemo, setShowMemo] = useState(false);
      const [selectedDuration, setSelectedDuration] = useState(30); 
      const [selectedAddons, setSelectedAddons] = useState([]); 
      const [tapCount, setTapCount] = useState(0);

      let tapTimeout = useRef(null);

      useEffect(() => {
        if (window.Telegram && window.Telegram.WebApp) {
          window.Telegram.WebApp.ready();
          window.Telegram.WebApp.expand();
        }
      }, []);

      const triggerHaptic = () => {
        try {
          if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.HapticFeedback) {
            window.Telegram.WebApp.HapticFeedback.selectionChanged();
          } else if (navigator.vibrate) {
            navigator.vibrate(50);
          }
        } catch (e) { console.log(e); }
      };

      const handleNameClick = () => {
        if (tapTimeout.current) clearTimeout(tapTimeout.current);
        setTapCount(prev => {
          if (prev + 1 >= 5) {
            setActiveTab('admin');
            return 0;
          }
          return prev + 1;
        });
        tapTimeout.current = setTimeout(() => setTapCount(0), 1000);
      };

      const toggleService = (service) => {
        triggerHaptic();
        let newServices;
        if (selectedServices.find(s => s.id === service.id)) {
          newServices = selectedServices.filter(s => s.id !== service.id);
        } else {
          newServices = [...selectedServices, service];
        }
        
        setSelectedServices(newServices);

        if (newServices.length > 0) {
          const suggestedTime = newServices.reduce((sum, s) => sum + parseInt(s.defaultTime), 0);
          setSelectedDuration(suggestedTime > 300 ? 300 : suggestedTime); 
        }
      };

      const toggleAddon = (addon) => {
        triggerHaptic();
        if (selectedAddons.find(a => a.id === addon.id)) {
          setSelectedAddons(selectedAddons.filter(a => a.id !== addon.id));
        } else {
          setSelectedAddons([...selectedAddons, addon]);
        }
      };

      const selectDateSlot = (dateObj) => { triggerHaptic(); setSelectedDate(dateObj.date); };
      const selectTimeSlot = (timeStr) => { triggerHaptic(); setSelectedTime(timeStr); };

      const addonsPrice = selectedAddons.reduce((sum, addon) => sum + parseInt(addon.price), 0);
      const totalPrice = (selectedDuration * appData.pricePerMinute) + addonsPrice;

      const handlePreBooking = () => setShowMemo(true);

      const handleFinalBooking = () => {
        triggerHaptic();
        setShowMemo(false); 
        setActiveTab('success'); 

        const servicesList = selectedServices.map(s => s.name).join(', ');
        const addonsList = selectedAddons.length > 0 ? `\n‚ûï –î–æ–ø—ã: ${selectedAddons.map(a => a.name).join(', ')}` : '';
        const message = `üî• *–ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å!*\n\nüìÖ ${selectedDate} –≤ ${selectedTime}\nüå∏ –ó–æ–Ω—ã: ${servicesList}${addonsList}\n‚è≥ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ: ${selectedDuration} –º–∏–Ω\nüí∞ –°—É–º–º–∞: ~${totalPrice} ‚ÇΩ`;
        console.log("–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è Telegram –≥–æ—Ç–æ–≤–æ:", message);
      };

      const resetBooking = () => {
        triggerHaptic();
        setActiveTab('main');
        setSelectedServices([]);
        setSelectedDate(null);
        setSelectedTime(null);
        setSelectedDuration(30);
        setSelectedAddons([]);
      };

      const renderMain = () => (
        <div className="pb-64 animate-[fadeIn_0.5s_ease-in-out]">
          
          <div className="flex flex-col items-center text-center mt-6 mb-8">
            <div className="w-28 h-28 rounded-full bg-gradient-to-tr from-[#C89D7C] to-[#E8CDB5] p-1 shadow-[0_0_20px_rgba(200,157,124,0.3)] mb-4">
              <div className="w-full h-full rounded-full bg-[#121212] flex items-center justify-center overflow-hidden relative">
                <img src={appData.photoUrl} alt="Master" className="object-cover w-full h-full opacity-90" />
              </div>
            </div>
            <h1 onClick={handleNameClick} className="text-2xl font-bold text-white tracking-wide cursor-pointer select-none">
              {appData.name}
            </h1>
            <p className="text-[#C89D7C] font-medium mt-1">{appData.profession}</p>
          </div>

          <div className="flex justify-evenly w-full px-4 mb-6">
            {appData.stories.map((story, idx) => {
              if (!story.trim()) return null; 
              return (
                <div key={idx} className="flex flex-col items-center gap-2">
                  <div className="w-14 h-14 sm:w-16 sm:h-16 rounded-full bg-gradient-to-tr from-[#754E33] to-[#E8CDB5] p-[1px] cursor-pointer hover:scale-105 transition-transform">
                    <div className="w-full h-full rounded-full bg-[#1A1A1A] flex items-center justify-center">
                      <Icon name="Sparkles" className="w-5 h-5 sm:w-6 sm:h-6 text-[#C89D7C]" />
                    </div>
                  </div>
                  <span className="text-[10px] sm:text-xs text-gray-400 font-medium whitespace-nowrap">{story}</span>
                </div>
              );
            })}
          </div>

          <div className="grid grid-cols-2 gap-3 px-4 mt-2">
            
            <div className="col-span-2 glass-card-dark p-4 rounded-3xl flex items-center justify-between border border-white/5">
              <div className="flex items-center gap-3">
                <div className="w-10 h-10 rounded-full bg-[#2A2A2A] flex items-center justify-center text-[#C89D7C] shrink-0">
                  <Icon name="MapPin" className="w-5 h-5" />
                </div>
                <div>
                  <p className="text-sm font-semibold text-gray-200">{appData.address}</p>
                  <p className="text-xs text-[#C89D7C] mt-0.5">{appData.addressNote}</p>
                </div>
              </div>
            </div>

            <div className="col-span-2 glass-card-dark p-5 rounded-3xl border border-white/5">
              <div className="flex items-center gap-2 mb-2">
                <Icon name="Info" className="w-5 h-5 text-[#C89D7C]" />
                <h3 className="font-semibold text-gray-200">–û–±–æ –º–Ω–µ</h3>
              </div>
              <p className="text-sm text-gray-400 leading-relaxed whitespace-pre-wrap">{appData.about}</p>
            </div>

            <div className="col-span-2 mt-4">
              <div className="flex items-center justify-between mb-4 px-1">
                <h2 className="text-xl font-bold text-white tracking-wide">–í—ã–±–µ—Ä–∏ –∑–æ–Ω—ã</h2>
                <div className="bg-[#2A2A2A] px-3 py-1 rounded-full border border-[#C89D7C]/30">
                  <span className="text-xs font-bold text-[#C89D7C]">{appData.pricePerMinute} ‚ÇΩ / –º–∏–Ω</span>
                </div>
              </div>

              <div className="flex flex-col gap-3">
                {appData.services.map(service => {
                  const isSelected = selectedServices.find(s => s.id === service.id);
                  return (
                    <div key={service.id} onClick={() => toggleService(service)} className={`glass-card-dark p-4 rounded-3xl cursor-pointer transition-all duration-300 border ${isSelected ? 'border-[#C89D7C] bg-[#C89D7C]/10' : 'border-white/5 hover:border-white/20'}`}>
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-3">
                          <div className="text-2xl">{service.icon}</div>
                          <div>
                            <h3 className="font-semibold text-gray-200">{service.name}</h3>
                            <p className="text-xs text-gray-500 flex items-center gap-1 mt-0.5">
                              <Icon name="Clock" className="w-3 h-3" /> ~ {service.defaultTime} –º–∏–Ω
                            </p>
                          </div>
                        </div>
                        <div className={`w-6 h-6 rounded-full border-2 ml-auto flex items-center justify-center transition-colors ${isSelected ? 'bg-[#C89D7C] border-[#C89D7C]' : 'border-gray-600'}`}>
                          {isSelected && <Icon name="CheckCircle2" className="w-4 h-4 text-black" />}
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>

              <h2 className="text-xl font-bold text-white tracking-wide mt-6 mb-4 px-1">–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å?</h2>
              <div className="flex flex-col gap-3">
                {appData.addons.map(addon => {
                  const isSelected = selectedAddons.find(a => a.id === addon.id);
                  return (
                    <div key={addon.id} onClick={() => toggleAddon(addon)} className={`glass-card-dark p-4 rounded-3xl cursor-pointer transition-all duration-300 border ${isSelected ? 'border-[#C89D7C] bg-[#C89D7C]/10' : 'border-white/5 hover:border-white/20'}`}>
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-3">
                          <div className="text-2xl">{addon.icon}</div>
                          <div>
                            <h3 className="font-semibold text-gray-200">{addon.name}</h3>
                            <p className="text-xs text-[#C89D7C] mt-0.5">+ {addon.price} ‚ÇΩ</p>
                          </div>
                        </div>
                        <div className={`w-6 h-6 rounded-full border-2 ml-auto flex items-center justify-center transition-colors ${isSelected ? 'bg-[#C89D7C] border-[#C89D7C]' : 'border-gray-600'}`}>
                          {isSelected && <Icon name="CheckCircle2" className="w-4 h-4 text-black" />}
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            </div>
          </div>
        </div>
      );

      const renderBooking = () => (
        <div className="px-4 pb-24 animate-[slideIn_0.3s_ease-out]">
          <button onClick={() => { triggerHaptic(); setActiveTab('main'); }} className="flex items-center gap-2 text-gray-300 mt-6 mb-6 bg-[#2A2A2A] px-4 py-2 rounded-full w-max border border-white/5">
            <Icon name="ChevronLeft" className="w-5 h-5" />
            <span className="font-medium">–ù–∞–∑–∞–¥ –∫ —É—Å–ª—É–≥–∞–º</span>
          </button>

          <h2 className="text-2xl font-bold text-white mb-6 tracking-wide">–í—ã–±–µ—Ä–∏ –≤—Ä–µ–º—è</h2>

          <div className="mb-8">
            <h3 className="text-sm font-semibold text-gray-500 mb-3 uppercase tracking-wider">–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞—Ç—ã</h3>
            <div className="flex gap-3 overflow-x-auto pb-2 hide-scrollbar">
              {appData.dates.map((item, idx) => (
                <div key={idx} onClick={() => selectDateSlot(item)} className={`flex flex-col items-center justify-center min-w-[70px] h-20 rounded-2xl cursor-pointer transition-all border ${selectedDate === item.date ? 'bg-gradient-to-b from-[#C89D7C] to-[#9A6A45] text-black shadow-[0_5px_15px_rgba(200,157,124,0.3)] border-transparent' : 'glass-card-dark text-gray-300 border-white/5'}`}>
                  <span className="text-xs mb-1 opacity-80">{item.day}</span>
                  <span className="text-xl font-bold">{item.date.split(' ')[0]}</span>
                </div>
              ))}
            </div>
          </div>

          {selectedDate && (
            <div className="animate-[fadeIn_0.5s_ease-out]">
              <h3 className="text-sm font-semibold text-gray-500 mb-3 uppercase tracking-wider">–°–≤–æ–±–æ–¥–Ω—ã–µ –æ–∫–æ—à–∫–∏</h3>
              <div className="grid grid-cols-3 gap-3">
                {appData.slots.map((time, idx) => (
                  <div key={idx} onClick={() => selectTimeSlot(time)} className={`py-3 rounded-xl text-center font-medium cursor-pointer transition-all border ${selectedTime === time ? 'bg-[#2A2A2A] text-[#C89D7C] border-[#C89D7C] shadow-[0_0_10px_rgba(200,157,124,0.2)]' : 'glass-card-dark text-gray-400 border-white/5 hover:bg-white/5'}`}>
                    {time}
                  </div>
                ))}
              </div>
            </div>
          )}
        </div>
      );

      const renderHearts = () => {
        return Array.from({ length: 25 }).map((_, i) => (
          <div key={i} className="absolute text-[#C89D7C] animate-[floatUp_linear_infinite]" 
               style={{
                 left: `${Math.random() * 100}%`,
                 animationDuration: `${Math.random() * 3 + 2}s`,
                 animationDelay: `${Math.random() * 2}s`,
                 fontSize: `${Math.random() * 15 + 10}px`,
                 opacity: 0.7
               }}>
            <Icon name="Heart" className="w-full h-full" />
          </div>
        ));
      };

      const renderSuccess = () => (
        <div className="relative px-4 h-screen flex flex-col items-center justify-center text-center animate-[zoomIn_0.5s_ease-out] overflow-hidden">
          
          <div className="absolute inset-0 z-0 pointer-events-none">
            {renderHearts()}
          </div>

          <div className="z-10 w-24 h-24 bg-[#C89D7C]/20 rounded-full flex items-center justify-center mb-6 border border-[#C89D7C]/50">
            <Icon name="Heart" className="w-12 h-12 text-[#C89D7C] animate-bounce" />
          </div>
          <h2 className="z-10 text-3xl font-bold text-white mb-2 shadow-black drop-shadow-lg">–ó–∞–ø–∏—Å—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞</h2>
          <p className="z-10 text-gray-300 mb-8 max-w-[250px] shadow-black drop-shadow-md">
            –ñ–¥—É —Ç–µ–±—è {selectedDate} –≤ {selectedTime}. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Å—è –∫ –ø—Ä–æ—Ü–µ–¥—É—Ä–µ!
          </p>
          
          <div className="z-10 glass-card-dark p-6 rounded-3xl w-full text-left mb-8 border border-[#C89D7C]/30 shadow-2xl">
            <h4 className="font-semibold text-gray-200 mb-3">–î–µ—Ç–∞–ª–∏ –∑–∞–ø–∏—Å–∏:</h4>
            <ul className="space-y-2 mb-4">
              {selectedServices.map(s => (
                <li key={s.id} className="text-sm text-gray-300 flex justify-between">
                  <span>{s.icon} {s.name}</span>
                </li>
              ))}
              {selectedAddons.map(a => (
                <li key={a.id} className="text-sm text-[#C89D7C] flex justify-between">
                  <span>{a.icon} {a.name}</span>
                  <span className="font-medium">+ {a.price} ‚ÇΩ</span>
                </li>
              ))}
            </ul>
            <div className="pt-3 border-t border-gray-700 flex justify-between items-center mb-2">
              <span className="text-gray-400">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ –≤—Ä–µ–º–µ–Ω–∏:</span>
              <span className="font-medium text-gray-100">{selectedDuration} –º–∏–Ω</span>
            </div>
            <div className="flex justify-between items-center">
              <span className="text-gray-400">–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</span>
              <span className="text-xl font-bold text-[#C89D7C]">~ {totalPrice} ‚ÇΩ</span>
            </div>
          </div>

          <button onClick={resetBooking} className="z-10 w-full py-4 bg-[#2A2A2A] text-white rounded-2xl font-semibold shadow-lg border border-white/10 relative overflow-hidden group">
            <span className="relative z-10">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</span>
            <div className="absolute inset-0 bg-[#C89D7C]/20 w-0 group-hover:w-full transition-all duration-300"></div>
          </button>
        </div>
      );

      const renderMemoModal = () => (
        <div className="fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-[fadeIn_0.3s_ease-out]">
          <div className="bg-[#1A1A1A] border border-[#C89D7C]/30 p-6 rounded-3xl w-full max-w-sm shadow-[0_0_40px_rgba(200,157,124,0.15)]">
            <div className="flex items-center gap-3 mb-4">
              <Icon name="AlertCircle" className="w-6 h-6 text-[#C89D7C]" />
              <h3 className="text-xl font-bold text-white">–í–∞–∂–Ω–æ –ø–µ—Ä–µ–¥ –ø—Ä–æ—Ü–µ–¥—É—Ä–æ–π!</h3>
            </div>
            
            <ul className="text-sm text-gray-300 space-y-3 mb-8 list-disc pl-5 marker:text-[#C89D7C]">
              {appData.memo.map((item, idx) => (
                <li key={idx}>{item}</li>
              ))}
            </ul>

            <div className="flex gap-3">
              <button onClick={() => { triggerHaptic(); setShowMemo(false); }} className="flex-1 py-3 rounded-xl border border-gray-700 text-gray-400 font-medium hover:bg-gray-800 transition-colors">
                –ù–∞–∑–∞–¥
              </button>
              <button onClick={handleFinalBooking} className="flex-[2] py-3 rounded-xl bg-gradient-to-r from-[#C89D7C] to-[#9A6A45] text-black font-bold shadow-lg">
                –ü–æ–Ω—è–ª–∞, –∑–∞–ø–∏—Å–∞—Ç—å—Å—è
              </button>
            </div>
          </div>
        </div>
      );

      const AdminPanel = () => {
        const [editData, setEditData] = useState(appData);
        
        // –ù–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –≤–≤–æ–¥–∞ –¥–∞—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏
        const [newDateVal, setNewDateVal] = useState('');
        const [newDayVal, setNewDayVal] = useState('');
        const [newTimeVal, setNewTimeVal] = useState('');

        const handleChange = (e, field) => {
          setEditData({...editData, [field]: e.target.value});
        };

        const handleArrayTextChange = (e, field) => {
          setEditData({...editData, [field]: e.target.value.split('\n')});
        };

        const handleStoryChange = (e, index) => {
          const newStories = [...editData.stories];
          newStories[index] = e.target.value;
          setEditData({...editData, stories: newStories});
        };

        // –õ–æ–≥–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞—Ç
        const addDate = () => {
          if (!newDateVal || !newDayVal) return;
          triggerHaptic();
          setEditData({...editData, dates: [...editData.dates, { date: newDateVal, day: newDayVal }]});
          setNewDateVal('');
          setNewDayVal('');
        };
        const removeDate = (index) => {
          triggerHaptic();
          const newDates = [...editData.dates];
          newDates.splice(index, 1);
          setEditData({...editData, dates: newDates});
        };

        // –õ–æ–≥–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
        const addTime = () => {
          if (!newTimeVal) return;
          triggerHaptic();
          setEditData({...editData, slots: [...editData.slots, newTimeVal]});
          setNewTimeVal('');
        };
        const removeTime = (index) => {
          triggerHaptic();
          const newSlots = [...editData.slots];
          newSlots.splice(index, 1);
          setEditData({...editData, slots: newSlots});
        };

        const saveChanges = () => {
          triggerHaptic();
          setAppData(editData);
          localStorage.setItem('electroAppData', JSON.stringify(editData));
          setActiveTab('main');
        };

        return (
          <div className="min-h-screen bg-[#0a0a0a] p-4 pb-24 animate-[fadeIn_0.3s_ease-in-out]">
            <div className="flex items-center gap-3 mb-6">
              <Icon name="Settings" className="w-8 h-8 text-[#C89D7C]" />
              <h2 className="text-2xl font-bold text-white">–ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</h2>
            </div>

            <div className="space-y-4">
              <div className="glass-card-dark p-4 rounded-2xl border border-white/10">
                <label className="block text-xs text-gray-400 mb-1">–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ (URL)</label>
                <input value={editData.photoUrl} onChange={(e) => handleChange(e, 'photoUrl')} className="w-full bg-[#1A1A1A] border border-gray-700 rounded-lg p-2 text-white text-sm" />
              </div>

              <div className="glass-card-dark p-4 rounded-2xl border border-white/10">
                <label className="block text-xs text-gray-400 mb-1">–ò–º—è</label>
                <input value={editData.name} onChange={(e) => handleChange(e, 'name')} className="w-full bg-[#1A1A1A] border border-gray-700 rounded-lg p-2 text-white text-sm" />
                
                <label className="block text-xs text-gray-400 mt-3 mb-1">–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ (–ú–∞—Å—Ç–µ—Ä...)</label>
                <input value={editData.profession} onChange={(e) => handleChange(e, 'profession')} className="w-full bg-[#1A1A1A] border border-gray-700 rounded-lg p-2 text-white text-sm" />
              </div>

              <div className="glass-card-dark p-4 rounded-2xl border border-white/10">
                <label className="block text-xs text-gray-400 mb-1">–ê–¥—Ä–µ—Å</label>
                <input value={editData.address} onChange={(e) => handleChange(e, 'address')} className="w-full bg-[#1A1A1A] border border-gray-700 rounded-lg p-2 text-white text-sm" />
                
                <label className="block text-xs text-gray-400 mt-3 mb-1">–û–±–æ –º–Ω–µ</label>
                <textarea value={editData.about} onChange={(e) => handleChange(e, 'about')} rows="3" className="w-full bg-[#1A1A1A] border border-gray-700 rounded-lg p-2 text-white text-sm"></textarea>
              </div>

              <div className="glass-card-dark p-4 rounded-2xl border border-white/10">
                <label className="block text-xs text-gray-400 mb-2">–ù–∞–∑–≤–∞–Ω–∏—è 5 –∫—Ä—É–∂–æ—á–∫–æ–≤ (–°—Ç–æ—Ä–∏–∑). –û—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º, —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å.</label>
                {editData.stories.map((s, i) => (
                  <input key={i} value={s} onChange={(e) => handleStoryChange(e, i)} placeholder={`–ö—Ä—É–∂–æ–∫ ${i+1}`} className="w-full bg-[#1A1A1A] border border-gray-700 rounded-lg p-2 text-white text-sm mb-2" />
                ))}
              </div>

              {/* –£–ª—É—á—à–µ–Ω–Ω–∞—è –∞–¥–º–∏–Ω–∫–∞ –¥–∞—Ç */}
              <div className="glass-card-dark p-4 rounded-2xl border border-white/10">
                <label className="block text-sm font-bold text-white mb-3">–î–æ—Å—Ç—É–ø–Ω—ã–µ –î–∞—Ç—ã</label>
                <div className="flex flex-wrap gap-2 mb-3">
                  {editData.dates.map((item, idx) => (
                    <div key={idx} className="bg-[#2A2A2A] border border-[#C89D7C]/30 rounded-lg px-3 py-1.5 flex items-center gap-2">
                      <span className="text-xs text-[#C89D7C]">{item.day}</span>
                      <span className="text-sm text-white font-medium">{item.date}</span>
                      <button onClick={() => removeDate(idx)} className="text-red-400 hover:text-red-300 ml-1 pb-0.5">√ó</button>
                    </div>
                  ))}
                </div>
                <div className="flex gap-2">
                  <input value={newDateVal} onChange={e => setNewDateVal(e.target.value)} placeholder="–ß–∏—Å–ª–æ (15 –ú–∞—Ä)" className="flex-[2] bg-[#1A1A1A] border border-gray-700 rounded-lg p-2 text-white text-sm" />
                  <input value={newDayVal} onChange={e => setNewDayVal(e.target.value)} placeholder="–î–µ–Ω—å (–ü—Ç)" className="flex-1 bg-[#1A1A1A] border border-gray-700 rounded-lg p-2 text-white text-sm" />
                  <button onClick={addDate} className="bg-gradient-to-r from-[#C89D7C] to-[#9A6A45] text-black px-4 py-2 rounded-lg font-bold text-xl leading-none">+</button>
                </div>
              </div>

              {/* –£–ª—É—á—à–µ–Ω–Ω–∞—è –∞–¥–º–∏–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ */}
              <div className="glass-card-dark p-4 rounded-2xl border border-white/10">
                <label className="block text-sm font-bold text-white mb-3">–°–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è</label>
                <div className="flex flex-wrap gap-2 mb-3">
                  {editData.slots.map((time, idx) => (
                    <div key={idx} className="bg-[#2A2A2A] border border-[#C89D7C]/30 rounded-lg px-3 py-1.5 flex items-center gap-2">
                      <span className="text-sm text-white font-medium">{time}</span>
                      <button onClick={() => removeTime(idx)} className="text-red-400 hover:text-red-300 ml-1 pb-0.5">√ó</button>
                    </div>
                  ))}
                </div>
                <div className="flex gap-2">
                  <input value={newTimeVal} onChange={e => setNewTimeVal(e.target.value)} placeholder="–í—Ä–µ–º—è (14:00)" className="flex-1 bg-[#1A1A1A] border border-gray-700 rounded-lg p-2 text-white text-sm" />
                  <button onClick={addTime} className="bg-gradient-to-r from-[#C89D7C] to-[#9A6A45] text-black px-4 py-2 rounded-lg font-bold">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
              </div>

              <div className="glass-card-dark p-4 rounded-2xl border border-white/10">
                <label className="block text-xs text-gray-400 mb-1">–ü–∞–º—è—Ç–∫–∞ (–∫–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)</label>
                <textarea 
                  value={editData.memo.join('\n')} 
                  onChange={(e) => handleArrayTextChange(e, 'memo')} 
                  rows="4" className="w-full bg-[#1A1A1A] border border-gray-700 rounded-lg p-2 text-white text-sm"></textarea>
              </div>

              <div className="glass-card-dark p-4 rounded-2xl border border-white/10 opacity-70">
                <p className="text-xs text-[#C89D7C] mb-2">*–ó–æ–Ω—ã –∏ –¥–æ–ø—ã –ø–æ–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç—Å—è —Å–ª–æ–∂–Ω–µ–µ, —è –≤—ã–≤–µ–ª –∏—Ö –≤ JSON –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:</p>
                <textarea 
                  value={JSON.stringify(editData.services, null, 2)} 
                  onChange={(e) => { try { setEditData({...editData, services: JSON.parse(e.target.value)}) } catch(e){} }} 
                  rows="5" className="w-full bg-[#1A1A1A] border border-gray-700 rounded-lg p-2 text-white text-xs font-mono mb-3"></textarea>
              </div>

            </div>

            <div className="fixed bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black to-transparent max-w-md mx-auto z-50">
              <button onClick={saveChanges} className="w-full bg-gradient-to-r from-[#C89D7C] to-[#9A6A45] text-black py-4 rounded-2xl font-bold shadow-lg">
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
              </button>
            </div>
          </div>
        );
      };

      return (
        <div className="max-w-md mx-auto min-h-screen relative shadow-2xl bg-black/40 border-x border-white/5 overflow-hidden">
          
          {activeTab === 'main' && renderMain()}
          {activeTab === 'booking' && renderBooking()}
          {activeTab === 'success' && renderSuccess()}
          {activeTab === 'admin' && <AdminPanel />}

          {showMemo && renderMemoModal()}

          {/* –í—Å–ø–ª—ã–≤–∞—é—â–∞—è –Ω–∏–∂–Ω—è—è —à—Ç–æ—Ä–∫–∞ —Å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–º –∏ –∫–Ω–æ–ø–∫–æ–π */}
          {activeTab === 'main' && selectedServices.length > 0 && (
            <div className="fixed bottom-0 left-0 right-0 max-w-md mx-auto animate-[slideInUp_0.3s_ease-out] z-50">
              <div className="bg-[#1A1A1A]/95 backdrop-blur-xl border-t border-x border-[#C89D7C]/30 rounded-t-3xl p-5 shadow-[0_-10px_40px_rgba(0,0,0,0.5)]">
                
                <div className="mb-5">
                  <div className="flex justify-between items-end mb-4">
                    <div className="flex flex-col">
                      <span className="text-3xl font-bold text-[#C89D7C]">{selectedDuration} <span className="text-lg text-gray-400 font-medium">–º–∏–Ω</span></span>
                    </div>
                    <div className="flex flex-col items-end">
                      <span className="text-xs text-gray-500 mb-1">–ü—Ä–∏–º–µ—Ä–Ω–æ</span>
                      <span className="text-xl font-bold text-white">~ {totalPrice} ‚ÇΩ</span>
                    </div>
                  </div>
                  
                  <input 
                    type="range" min="15" max="300" step="15" 
                    value={selectedDuration} onChange={(e) => { triggerHaptic(); setSelectedDuration(parseInt(e.target.value)); }}
                    className="w-full accent-[#C89D7C] h-2 bg-gray-800 rounded-lg appearance-none cursor-pointer"
                  />
                  <div className="flex justify-between text-[10px] text-gray-500 mt-2 font-medium">
                    <span>15 –º–∏–Ω</span><span>2 —á</span><span>3 —á</span><span>5 —á</span>
                  </div>
                </div>

                <button onClick={() => { triggerHaptic(); setActiveTab('booking'); }} className="w-full bg-gradient-to-r from-[#C89D7C] to-[#9A6A45] text-black p-4 rounded-2xl shadow-lg flex items-center justify-center gap-2 font-bold text-lg">
                  –í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É
                  <Icon name="ChevronLeft" className="w-5 h-5 rotate-180" />
                </button>
              </div>
            </div>
          )}

          {activeTab === 'booking' && selectedDate && selectedTime && (
             <div className="fixed bottom-0 left-0 right-0 p-4 max-w-md mx-auto animate-[slideInUp_0.3s_ease-out] z-50">
             <button onClick={handlePreBooking} className="w-full bg-gradient-to-r from-[#C89D7C] to-[#9A6A45] text-black p-4 rounded-3xl shadow-[0_10px_40px_rgba(200,157,124,0.2)] flex items-center justify-center gap-2 font-bold text-lg">
               –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–ø–∏—Å—å
             </button>
           </div>
          )}

        </div>
      );
    }

    tailwind.config = {
      theme: {
        extend: {
          keyframes: {
            fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
            slideIn: { '0%': { transform: 'translateX(20px)', opacity: '0' }, '100%': { transform: 'translateX(0)', opacity: '1' } },
            slideInUp: { '0%': { transform: 'translateY(20px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } },
            zoomIn: { '0%': { transform: 'scale(0.95)', opacity: '0' }, '100%': { transform: 'scale(1)', opacity: '1' } },
            floatUp: { 
              '0%': { transform: 'translateY(100vh) scale(0.5) rotate(0deg)', opacity: '1' }, 
              '100%': { transform: 'translateY(-20vh) scale(1.5) rotate(360deg)', opacity: '0' } 
            },
          }
        }
      }
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>